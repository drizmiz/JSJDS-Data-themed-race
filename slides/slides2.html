<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>一带一路对中国和其他沿线国家的影响及政策分析</title>
    <meta charset="utf-8" />
    <meta name="author" content="范皓年 邓睿哲 李润泽" />
    <meta name="date" content="2021-07-06" />
    <script src="libs/header-attrs-2.8/header-attrs.js"></script>
    <link href="libs/remark-css-0.0.1/default.css" rel="stylesheet" />
    <link rel="stylesheet" href="zh-CN.css" type="text/css" />
    <link rel="stylesheet" href="xaringan-themer.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# 一带一路对中国和其他沿线国家的影响及政策分析
## ——数据科学的视角
### 范皓年 邓睿哲 李润泽
### Peking University
### 2021-07-06

---


class: center, middle

# 概要


???

第一个上台 压力山大 诚惶诚恐

自我介绍 数学科学学院 第二个

我们做的是计算机设计大赛主题赛 倾向数据 程序方面介绍较少

很大的标题 主办方要求 比较正规

为什么一带一路？为什么说是数据科学视角？

“一带一路”是我国的重要战略之一. 《中华人民共和国国民经济和社会发展第十三个五年规划纲要》提到要“推进‘一带一路’建设”，《中华人民共和国国民经济和社会发展第十四个五年规划和2035年远景目标纲要》同样提到要“推动共建‘一带一路’高质量发展”.

投资回报率是经济学上的一个重要概念. 越是发展中国家，由于其具有的潜在经济增长率越高，回报率自然越大. 但由于发展中国家难免有基础设施欠缺、政治不稳定、医疗健康水平低下等情况，又会使投资的失败率大大增加. 因此现实中，纵然发展中国家潜在投资回报率高，实际投资却并不充分. 一定程度上，“一带一路”计划基于政治互信，通过国家层间的协定，对投资中的不稳定因素起到了有效的限制作用. 但由于涉及国家广泛，文化背景复杂，每个国家的实际情况不同，我们仍然需要通过数据评价中国与每个沿线国家的相互投资水平.

Page 2

我们发现，一带一路提出后，中国与一些沿线国家的投资水平有了显著增加，这或许是由于不稳定因素的减少. 而对多数国家，中国对其投资水平并未如愿得到额外增长. 这可能由原本投资水平较高、该国家稳定性一直较好等因素解释. 同时，这也启发我们：一带一路作为国家长期规划的重要部分，其效应不会在短时间内体现，而需要进行更长远地观察与研究.

同时，我们将一带一路沿线国家与中国的相互投资水平进行了可视化，可以直观反映出一带一路的成效，并对不同国家进行定性比较. 此部分有很强的政策参考价值.
我们还将研究更深入地推进了一步. 开始提到，落后的医疗健康状况也是不稳定因素之一，我们利用健康数据集，研究了一带一路对沿线国家健康水平的影响. 多种数据的运行结果均表明，一带一路有效促进了沿线国家健康水平的提升. 显然，健康水平的进步，可以通过提高本国投资稳定性，提高投资吸引力. 对于一带一路沿线健康水平较差的发展国家，有望形成良性循环，投资与健康水平相互促进，最终正向作用于经济发展.
---
class: center, middle

# 主要工作

???

数据模型、分析技术、程序技术

---

- `\(P\)`值，置信区间的计算 (Chernozhukov et al., 2021)

&lt;img src="resources/黑山_ci_sc.svg" width="70%" height="70%" style="display: block; margin: auto;" /&gt;

???

此后，我们利用Chernozhukov et al.[@doi:10.1080/01621459.2021.1920957]的方法分析P值和置信区间等信息.




- The Workflow

- 数据集说明

- 数据清洗

- 数据分析

- 数据可视化

---

class: center, middle

## The Workflow

&lt;img src="resources/workflow.png" width="120%" height="120%" /&gt;

.footnote[此图取自 _R for Data Science_，以[CC BY-NC-ND 3.0 US](http://creativecommons.org/licenses/by-nc-nd/3.0/us/)发布.]

???

根据 _R for Data Science_，数据分析的一般流程如[图3](#wf)所示. 本项目也符合这种模式.

---

## 数据集说明

国际贸易数据（`/data/investment/FDI_untidy.csv`）下载自CEIC数据库. 我们引用CEIC全球数据库中“实际利用的外国资本：按地区分类”和“对外直接投资：国别”两个数据集，逐条下载了中国在利用其他国家资本量（月度数据），和中国对其他国家的直接投资（月度数据）. CEIC数据库覆盖的时间范围为1985年12月至2021年4月，每条数据均以月为统计单位. 

其他用到的数据集来自世界健康数据集，包括：

- under5MortalityRate.csv
数据集记录了1962-2019年不同国家5岁以下儿童死亡率（每千人的死亡人数）.

- infantMortalityRate.csv
数据集记录了1962-2019年不同国家出生婴儿死亡率（每千人的死亡人数）. 

???

故为了数据的完整性，初步清洗时，以纵轴为月份（自1985年12月至2021年4月），横轴为统计指标（中国利用不同国家的资本，与对不同国家的直接投资），对数据进行了合成与排列. 

其中，实际利用的外国资本分为直接投资和其他投资方式. 直接投资包括中外合资，合资开发和独资企业，外资参股公司以及共同开发；其他投资方式包括补偿贸易和加工组装. 数据来源为国家统计局和中华人民共和国商务部. 该数据可反映外国对中国的投资. 

对外直接投资指中国国内投资者以现金、实物、无形资产等方式在国外及港澳台地区设立、购买国（境）外企业，并以控制该企业的经营管理权为核心的经济活动. 数据统计来源为中华人民共和国商务部. 该数据可反映中国对外投资. 
我们认为，该指标反应了一国最基础的医疗水平状况. 相比预期寿命，该指标更好地将研究标的限制在了基础卫生条件，如洁净水源、疫苗接种、家庭卫生条件等. 而对于发展中国家，基础医疗状况和卫生水平的提高，才能最贴切地带来经济发展的动力. 故在预期寿命之外，我们还专门将“5岁以下儿童死亡率”作为研究指标. 

我们认为，相比5岁以下儿童死亡率，该指标更准确地反映了一国在生育保障上的医疗和健康水平.

---

### 画个图

&lt;img src="resources/蒙古_data_raw.svg" width="90%" height="90%" style="display: block; margin: auto;" /&gt;

---

## 数据清洗

--

- 什么样子的数据结构才算是整理好？

???

虽然不为人所重视，数据清洗往往是数据分析工作中耗时最久的部分. 不仅如此，数据清洗的目标也往往不被人熟知. 什么数据结构才算是整理好？幸运的是，Hadley Wickham的文章向我们提供了一种通俗易懂的解释：每行应该代表一个观察(observation)，每列应该代表一个变量(variable). 根据此种原则，并利用其为此目的开发的R包**tidyverse**，进行数据清洗. 其部分步骤如下所示.

--

- 每行应该代表一个观察(observation)，每列应该代表一个变量(variable).

--

- 利用**tidyverse**，结合**正则表达式**，进行数据清洗. 其部分步骤如下页所示.

---

## 数据清洗

```r
simplified_df &lt;- raw_df %&gt;%
  filter(X1 %&gt;% str_detect("^\\d"))
```
```r
fliped_df &lt;- simplified_df %&gt;%
  pivot_longer(c(-时间), names_to = "observation", values_to = "val")
```
```r
str %&gt;%
  str_replace(pattern = "(.*):(总计|一带一路)", replacement = "1/\\2/\\2") %&gt;%
  str_replace(pattern = "::", replacement = ":") %&gt;%
  str_replace(pattern = "(.*):(.*洲):*(.*)", replacement = "1/\\2/\\3")
```
```r
df &lt;- fliped_df %&gt;%
  mutate(observation = observation %&gt;% stdize()) %&gt;%
  separate(col = "observation", into = c("type", "地区", "国家"), sep = "/") %&gt;% 
  spread(key = "type", value = "val")
```

---

## 数据分析

数据建模和分析是传统上受重视的技术. 其主要内容[已经](#ana)详述，这里不再赘述.

- 本项目评估了：对测试进行安慰剂检验 (placebo test) 的情况（`sens.csv`），测试的P值（`p.noeff.csv`），结果的置信区间（`ci.csv`）

- 并以`pdf`文件，绘制出了按国家分类的置信区间的情况

???

对各个国家分别进行的分析结果存储于本项目`results`文件夹下的`results_IMR`（婴儿死亡率数据）和`results_invest`（投资数据）文件夹中. 其中，`sens.csv`描述了对测试进行安慰剂检验(placebo test)的情况，`p.noeff.csv`描述了测试的P值，`ci.csv`描述了结果的置信区间，`pdf`文件绘制出了按国家分类的置信区间的情况.

以下对各个国家分别进行的分析结果存储于本项目`results`文件夹下的`IMR`（婴儿死亡率数据）、`5MR`（5岁以下儿童死亡率）、`investment`（投资数据）文件夹中. 其中，`sens.csv`描述了对测试进行安慰剂检验(placebo test)的情况，`p.noeff.csv`描述了测试的P值，`ci.csv`描述了结果的置信区间，`pdf`文件绘制出了按国家分类的置信区间的情况.

---

- 缺失数据填补

- 反事实推断

![黑山](resources/黑山_ci_sc.svg){#hs .class width=50% height=50%}

- 总体反事实推断

![一带一路对五岁以下儿童死亡率的总效应示意图](resources/5MR_pooled.svg){#pool .class width=50% height=40%}

???

我们的数据集，正和许多类似的真实世界数据集一样，存在着许多缺失数据`NA`. 缺失数据的处理方式不外乎删除或填补.

- 对于我们的investment数据集，其缺失普遍存在，故我们采用填补的方法. 参见[方法$\star$](#method).
- 对于本次大赛提供的世界健康数据集，其缺失更有规律，即对于任意一个国家，缺失一个时间点的数据意味着缺失此前所有数据. 恰当地选择时间范围，再删去个别几个缺失较大的国家[^cty]，就在可以避免填补的同时保留大部分数据. 因此，我们选择删去.

[^cty]: 这些国家往往那时才成立，例如从母国中分裂出.

分析一带一路的影响，就是要分析某一事件发生后，某一值的变化情况，这是经典的政策影响问题. 而该值自身必然存在着模型外因素导致的变化趋势，所以我们需要利用某些技术来去除这些因素的影响. 于是，我们运用双重差分和合成控制两种技术. 参见[方法$\star$](#method). 例如，黑山的新生儿死亡率随时间的反事实变化绘图如[图3](#hs)所示.

除了估计分别的效应之外，我们注意到一组国家总效应的置信区间并不必然是分别的效应的置信区间的函数.[@FirpoPossebom] 进一步地，我们应用R包**augsynth**[@citation_augsynth]中的`multisynth`函数进行多国家的效应推断，其结果存储于`results`下各分文件夹的`pooled`文件夹中. 例如，五岁以下儿童死亡率的总效应如[图4](#pool)所示.

---

## 数据可视化

### 可视化工具

项目将世界经济及其相关的数据，展示在世界地图上，考虑Python语言相对于JavaScript具有更好的数据处理能力，我们使用基于Apache Echarts的Pyecharts.

我们主要做了如下几个可视化工作：

- 将2003到2019年的中国对外直接投资总额表示在地图上

- 将世界健康数据集中预期寿命和5岁以下死亡率分性别表示在图中

我们从图中可以定性地看出中国外企对于一带一路沿线国家的投入，以及相应国家的经济水平、生活水平的优化.

???

本节说明项目中所用到的可视化相关工具、组件、流程.

---

### 文件结构

```
visualization
├── README.md
├── data
│   ├── FDI_filled_m.csv
│   ├── FDI_useful.csv
│   ├── LE.csv
│   ├── UFMR_m.csv
│   ├── country_ce.json
│   ├── syno_dict.json
│   └── world_country.json
├── mytool.ipynb
├── raw_plot
│   └── ...
├── out
│   ├── 五岁以下死亡率.html
│   ├── 外商直接投资情况-filled.html
│   ├── 外商直接投资情况.html
│   └── 预期寿命.html
├── FDI.py
└── world_health.ipynb
```

---

可视化相关的脚本以及输出结果全部储存在`./visualization`中.

其中`./visualization/data/`是可视化所用到的数据，不仅包括我们绘图所需的数据，包括对外直接投资`FDI*.csv`、健康相关数据`LE*.csv`和`UFMR*.csv`等，还包括中英对照表`country_ce.json`、以及国家名的同义对照表`syno_dict.json`等工具数据. 

`raw_plot/`目录是用R生成的原始数据变化情况，其中一带一路参与国家以加粗线绘制.

`mytool.ipynb`为工具和测试用notebook，用于生成工具json和进行原型开发测试. 

`FDI.py`为对外直接投资可视化脚本，出于易用性，其中`render()`函数中给出的文件名，在得到成品文件后稍后手动更改为中文. 

`world_health.ipynb`为世界卫生健康相关数据可视化脚本，前两个cell分别用于绘制世界国家预期寿命和5岁以下死亡率，第三个cell尝试将不同的性别绘制在同一张图中，但是由于timeline和gender两个尺度只能分开调整，所以在时间纵向对比时并不方便，我们将结果绘制为三个图构成的Page Echarts图. 

`./visualization/out/`是可视化的文件，成品文件名已经更改，相对清楚. 注意其中`外商直接投资情况-filled.html`为利用算法填充部分缺失数据之后的FDI图像. 

---

### 流程

以FDI（对外直接投资）为例，我们讲述项目中使用的pyecharts可视化方法，相对其他几个可视化工作，其中使用了对数化、相对复杂，故说明后其余同理. 

```python
import pandas as pd                                   # 数据分析组件
import json                                           # 用于导入工具json
from pyecharts import options as opts                 # 用于调整pyecharts图的属性
from pyecharts.charts import Timeline, Map            # 选取pyecharts基本类型
from pyecharts.globals import ThemeType               # 选取pyecharts主题
import numpy as np                                    # python数值计算工具
tl = Timeline(init_opts=opts.InitOpts(
    theme=ThemeType.INFOGRAPHIC,
    bg_color='white',
    page_title='外商直接投资情况'
))                                                    # 生成timeline图结构
with open("./data/country_ce.json", 'r', encoding='utf-8') as f:
    ce_dict = json.load(f)                            # 导入国家名称中英文对照表

df = pd.read_csv('./FDI_filled_m.csv')                # 生成dataframe
df.iloc[:, 3] = df.iloc[:, 3].apply(np.log1p)         # 将数值列对数化
```

---

### 流程

```python
for year in range(2003, 2019+1):                      # 循环添加不同年份的数据到timeline图中
    map = (
        Map()                                         # 生成一个年份的地图
        .add(df.columns.tolist()[-1]+"（对数值，原单位：百万美元）",# 设定图层名
             [[ce_dict[row['国家']], row[3]]          # 读入数据，使用dataframe方法进行筛选
                 for _, row in df[df.iloc[:, 0] == year].iterrows()],
             maptype="world",                         # 设定为世界地图
             is_map_symbol_show=False,                # 不描点
             )
        .set_series_opts(label_opts=opts.LabelOpts(is_show=False)) # 在地图中不显示对应国家的数值
        .set_global_opts(
            title_opts=opts.TitleOpts(title=f"{year}年外商直接投资情况"), #设定当前页的标题
            visualmap_opts=opts.VisualMapOpts(
                max_=df[df.iloc[:, 0] == year].iloc[:, 3].max()),    # 重设图例范围
            toolbox_opts=opts.ToolboxOpts(),                         # 打开工具箱组件，便于后续使用鼠标调节

        )
    )
    tl.add(map, f"{year}年") # 将当前图层加入timeline结构中
tl.render("./out/vis.html") # 生成临时文件
```

---

### 可交互图形 by ECharts

&lt;iframe width="900" height="500" src="resources/html/外商直接投资情况-filled.html" frameborder="0" allowfullscreen&gt;&lt;/iframe&gt;

---

### 可交互图形 by ECharts

&lt;iframe width="900" height="500" src="resources/html/世界健康-ci.html" frameborder="0" allowfullscreen&gt;&lt;/iframe&gt;

---
class: center, middle
# 总结

---
## 分析结果

在一带一路的参与国家中，婴儿死亡率相比预期降低（ `\(P&lt;0.10\)`）的国家共有4个，如下所示.


```r
read_csv("../results/IMR/ci.csv") %&gt;%
        filter(`max(ci.sc)`&lt;0) %&gt;% group_by(国家) %&gt;% nest() %&gt;% .[["国家"]]
```

```
## [1] "哈萨克斯坦" "斯洛文尼亚" "拉脱维亚"   "黑山"
```

与预期不符，在一带一路的参与国家中，中国对当地的投资相比预期显著降低（ `\(P&lt;0.10\)`）的国家仅有1个，如下所示.


```r
read_csv("../results/investment/ci.csv") %&gt;%
        filter(`min(ci.sc)`&gt;0) %&gt;% group_by(国家) %&gt;% nest() %&gt;% .[["国家"]]
```

```
## [1] "印度尼西亚"
```

且平均而言，参与一带一路反而额外降低中国对当地的投资的对数约 `\(0.40\)`.

???

可见，在一带一路的参与国家中，婴儿死亡率相比预期降低（$P&lt;0.10$）的国家共有4个. 婴儿死亡率相比预期升高（$P&lt;0.10$）的国家共有3个. 平均而言，一带一路能够额外降低婴儿死亡率的对数约0.04.

---

## 分析结果

![数据模型示意图](resources/DAG.svg)

--

根据常识，投资($Y$)对经济发展水平($Z$)的平均因果作用是正的，而经济发展水平($Z$)对健康水平($W$)的平均因果作用也是正的. 我们建立以下模型.

- 在相同的经济发展水平下，参与一带一路能够相比预期增加沿线国家的国民健康水平，或者狭义来说，**降低婴儿死亡率**.

???

这样，根据我们的模型，在相同的经济发展水平下，参与一带一路能够相比预期增加沿线国家的国民健康水平，或者狭义来说，降低婴儿死亡率. 从这一方面来看，一带一路对沿线国家经济以外的影响，相比传统的认识，还有待更深的评估.

根据常识，投资($Y$)对经济发展水平($Z$)的平均因果作用是正的，而经济发展水平($Z$)对健康水平($W$)的平均因果作用也是正的. 因此，根据我们的模型，在相同的经济发展水平下，参与一带一路能够相比预期增加沿线国家的国民健康水平，或者狭义来说，降低婴儿死亡率. 从这一方面来看，一带一路对沿线国家经济以外的影响，还有待更深的评估.

---
class: center, middle
## 不足和展望

???

我们的报告最显著的不足之处是将不同国家的结论组合的方式显得过于随意，仅仅是计算每个国家的效应然后求平均，没有考虑到国家和国家的权重问题. 类似地，在计算投资额时，可以考虑除去国家的经济总量，以反映中国投资占比占该国家GDP的比例. 进一步地，一组国家总效应的置信区间并不必然是分别的效应的置信区间的函数. 然而，进一步研究这个问题需要更多的数学细节，并超过了本项目的范围.

multiple testing

填补缺失数据，单独估计

---
class: center, middle

# 关于本幻灯片

.footnote[[R Markdown](https://rmarkdown.rstudio.com) syntax,&lt;br /&gt;Powered by [**xaringan**](https://github.com/yihui/xaringan) and [remark.js](https://remarkjs.com)]

---
class: center, middle

# THANKS

    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
